// src/components/ClientLogosSection.astro
import { getCollection } from 'astro:content';

let clientLogos = [];
let errorLoadingClients = null;

try {
  clientLogos = await getCollection('clients');
} catch (e) {
  errorLoadingClients = e;
  console.error("Error fetching 'clients' collection:", e);
}
---

{errorLoadingClients && (
  <div style="border: 2px solid red; padding: 10px; color: red;">
    <p><strong>Error loading client logos:</strong></p>
    <pre>{JSON.stringify(errorLoadingClients, null, 2)}</pre>
  </div>
)}

{clientLogos.length > 0 && !errorLoadingClients && (
  <div class="client-logos-section-test-wrapper">
    <h3 class="client-logos-title-test">Trusted By (Simplified Test)</h3>
    <div class="client-logos-grid-test">
      {clientLogos.map(client => (
        <div class="client-logo-item-test">
          <p>Name: {client.data.name}</p>
          <p>Logo Path: {client.data.logo}</p>
          <p>Link: {client.data.link || 'N/A'}</p>
        </div>
      ))}
    </div>
  </div>
)}

{clientLogos.length === 0 && !errorLoadingClients && (
    <p style="color: orange; padding: 10px; border: 1px solid orange;">
        No client logos found. (This is okay if you haven't added any client content files in <code>src/content/clients/</code> yet).
    </p>
)}

<style>
  .client-logos-section-test-wrapper { 
    margin-bottom: 20px; 
    border: 1px dashed blue;
    padding: 10px;
  }
  .client-logos-title-test { 
    font-weight: bold; 
    color: blue;
  }
  .client-logo-item-test { 
    border: 1px solid #ccc; 
    padding: 10px; 
    margin-top: 5px; 
    background-color: #f9f9f9;
    color: #333;
  }
</style>