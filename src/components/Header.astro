---
// src/components/Header.astro
const contactEmail = "hey@mittel.tv";
---
<div class="main-header-wrapper">
    {/* ... HTML for buttons ... */}
    <div class="header-sub-col feed-button-desktop-container">
        <button type="button" id="home-feed-view-btn" class="desktop-only">
            Feed
        </button>
    </div>
    <div class="header-sub-col overview-button-container">
        <button type="button" id="overview-view-btn" class="nav-button">
           Projects
        </button>
    </div>
    <div class="header-sub-col about-button-container">
        <button type="button" id="about-view-btn" class="nav-button">
           About
        </button>
    </div>
    <div class="header-sub-col header-contact-item">
        <button type="button" id="contact-link" class="nav-button">
           Contact
        </button>
    </div>
    <div class="header-sub-col info-button-mobile-container">
        <button type="button" id="mobile-feed-highlights-btn" class="mobile-only nav-button">
            {/* Text set by JS */}
        </button>
    </div>
</div>

<style>
    .main-header-wrapper {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        font-size: inherit;
    }

    .main-header-wrapper > div.header-sub-col {
        box-sizing: border-box;
        flex-grow: 0;
        flex-shrink: 0;
        flex-basis: auto;
        display: flex;
        align-items: baseline; /* Default for desktop */
    }

    .feed-button-desktop-container {
        justify-content: flex-start;
        text-align: left;
    }
    .overview-button-container,
    .about-button-container {
        justify-content: center;
        text-align: center;
    }
    .header-contact-item {
        justify-content: flex-end;
        text-align: right;
    }

    .main-header-wrapper button {
        padding: 2px 0;
        margin: 0;
        font-size: inherit;
        font-family: inherit;
        font-weight: var(--font-weight-bold);
        line-height: 1.3;
        color: inherit;
        background: none;
        border: none;
        cursor: pointer;
        white-space: nowrap;
    }

    .main-header-wrapper button.nav-button {
        display: inline-flex; /* Default for nav-buttons */
        align-items: center;
        justify-content: center;
    }

    /* Default visibility rules */
    .mobile-only { display: none !important; }
    .desktop-only { display: inline-block !important; } /* Or inline-flex if it's always a nav-button */
    .info-button-mobile-container { display: none !important; }


    @media (max-width: 768px) { /* MOBILE STYLES */
        .main-header-wrapper {
            flex-direction: column;
            align-items: stretch; /* CRITICAL: Make children (.header-sub-col) stretch horizontally */
            justify-content: space-around; /* Distribute .header-sub-col items vertically */
            gap: 0px;
            height: 100%;
            width: 100%;
            box-sizing: border-box;
        }

        .main-header-wrapper > div.header-sub-col {
            display: block; /* MODIFICATION: Change from flex to block */
            width: 100%;    /* CRITICAL: Ensure it takes full width provided by stretched parent */
            box-sizing: border-box;
            text-align: right; /* CRITICAL: Align its inline/inline-block children (the button) to the right */
            /* Remove flex-specific properties from desktop if they were here:
               justify-content: flex-end;
               align-items: center;
            */
            /* Add a little padding for vertical rhythm if needed, e.g. */
            /* padding: 2px 0; */ /* This might affect vertical distribution by space-around */
        }

        /* Ensure the desktop-specific button container is hidden on mobile */
        .feed-button-desktop-container {
             display: none !important;
        }
        /* Ensure mobile-specific containers are displayed as blocks to respect ordering */
        .info-button-mobile-container,
        .overview-button-container,
        .about-button-container,
        .header-contact-item { /* header-contact-item is also a .header-sub-col */
            display: block !important; /* Ensure it's block to respect parent's text-align */
        }

        /* Ordering for mobile */
        .info-button-mobile-container { order: 1; }
        .overview-button-container { order: 2; }
        .about-button-container { order: 3; }
        .header-contact-item { order: 4; }


        .mobile-only { /* This class is on the button itself */
            display: inline-flex !important; /* Button behaves like an inline-block, respects text-align of parent */
        }
        .desktop-only { /* This class is on the button itself */
            display: none !important;
        }

        .main-header-wrapper button {
             padding: 2px 0; /* Original vertical padding for the button text */
             margin: 0;
             line-height: 1.3;
             white-space: normal;
             overflow-wrap: break-word;
             word-break: break-all;
             text-align: right; /* Text *within* the button should also be right-aligned if it wraps */
             /* The button element itself is display: inline-flex */
        }

        .main-header-wrapper button:not(.active):hover {
            color: var(--color-text-unified);
        }
        .main-header-wrapper button.active:hover {
            color: var(--color-accent);
        }
        /* .main-header-wrapper button.nav-button styling is already applied by default */
    }
</style>

<script define:vars={{ contactEmail }}>
    const contactButton = document.getElementById('contact-link');
    if (contactButton) {
        contactButton.addEventListener('click', () => {
            window.location.href = `mailto:${contactEmail}`;
        });
    }
</script>