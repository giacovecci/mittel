---
// src/components/StaticInfo.astro
import { Image } from 'astro:assets';
import headshotImage from '/src/assets/headshot-2.jpg';
import { getEntry } from 'astro:content';

// Fetch content.
// 'general_content' is the collection (folder) name.
// 'static_info' is the slug (filename without .md) of the data file.
const entry = await getEntry('general_content', 'static_info');

let introTextToDisplay = "Error: Intro text not loaded."; // Fallback

if (entry && entry.data && typeof entry.data.introText === 'string') {
    introTextToDisplay = entry.data.introText;
} else {
    console.error("StaticInfo.astro: Could not load introText from 'general_content/static_info.md'. Entry:", entry);
}

// Image details
const imageAltText = "a picture of Piotr Å»akowiecki";
const imageWidth = 854;
const imageHeight = 854;
---
<div class="static-info-wrapper">
    <div class="static-visual-container">
        <Image 
            src={headshotImage} 
            alt={imageAltText} 
            width={imageWidth} 
            height={imageHeight}
            format="webp"
            quality={80}      
            densities={[1, 1.5, 2]}
            loading="lazy"
        />
    </div>
    <div class="static-text-container">
        <p>{introTextToDisplay}</p>
    </div>
</div>

<style>
    .static-info-wrapper {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-lg);
        height: 100%;
        box-sizing: border-box;
    }
    .static-visual-container {
        width: 100%;
    }
    .static-visual-container :global(img) {
        display: block;
        max-width: 100%;
        height: auto;
        border-radius: var(--border-radius-sm);
    }
    .static-text-container p {
        margin-top: 0;
        line-height: var(--line-height-unified);
    }
    @media (max-width: 768px) and (orientation: portrait) {
        .static-info-wrapper {
             gap: var(--spacing-md);
        }
    }
</style>