---
// src/layouts/LandingLayout.astro
interface Props {
    title?: string;
    backgroundImageUrl?: string;
    backgroundAltText?: string; 
}
const { 
    title = 'Mittel.TV', 
    backgroundImageUrl = '/uploads/placeholder-landing-bg.jpg',
    backgroundAltText = 'Abstract background image' 
} = Astro.props;
---
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <title>{title}</title>
    
    <script is:inline>
      // ... (theme script remains the same) ...
      const THEME_KEY = 'theme-preference';
      const THEME_CLASS_LIGHT = 'light-mode';
      const THEME_CLASS_DARK = 'dark-mode';

      const getThemePreference = () => {
        if (typeof localStorage !== 'undefined') {
          const storedTheme = localStorage.getItem(THEME_KEY);
          if (storedTheme) {
            return storedTheme;
          }
        }
        return 'light'; 
      };

      const applyTheme = (theme) => {
        document.documentElement.classList.remove(THEME_CLASS_LIGHT, THEME_CLASS_DARK);
        if (theme === 'light') {
          document.documentElement.classList.add(THEME_CLASS_LIGHT);
        }
      };

      window.currentTheme = getThemePreference();
      applyTheme(window.currentTheme);

      window.toggleTheme = () => {
        window.currentTheme = window.currentTheme === 'light' ? 'dark' : 'light';
        localStorage.setItem(THEME_KEY, window.currentTheme);
        applyTheme(window.currentTheme);
        document.dispatchEvent(new CustomEvent('themechanged', { detail: { theme: window.currentTheme } }));
      };
    </script>

    <style is:global>
        @import '../styles/global.css'; 

        html {
            height: 100%; 
        }
        body.landing-body-fullscreen {
            background-image: var(--landing-bg-image-url-var);
            background-size: cover;
            background-position: center center; /* Default for desktop */
            background-attachment: fixed; 
            background-repeat: no-repeat;
            
            min-height: 100vh; 
            width: 100%;
            margin: 0;
            
            display: flex; 
            flex-direction: column;
            
            /* Default (Desktop) alignment: Center content */
            align-items: center;    
            justify-content: center;
            
            /* Default (Desktop) padding */
            padding: var(--spacing-xl) var(--spacing-lg); 

            color: var(--color-text-unified); 
            text-align: center;
            overflow-y: auto; /* Allow scroll on desktop if centered box is tall */
            box-sizing: border-box;
            font-size: var(--font-size-desktop-unified); 
            line-height: var(--line-height-unified);
            background-color: var(--color-background); 
        }

        /* --- Mobile Specific Layout for body.landing-body-fullscreen --- */
        @media (max-width: 768px) {
            html {
                /* overflow: hidden; /* Consider if scrolling is ever needed for the content box */
            }
            body.landing-body-fullscreen {
                /* Body is still 100vh, but its content starts after 50vh padding */
                height: auto; /* Allow body to grow if content box is very tall */
                min-height: 100vh; /* Ensure it's at least viewport height */
                overflow-y: auto; /* Allow scrolling if content box makes body taller than 100vh */
                
                /* This padding creates the 50vh image area at the top */
                padding: 50vh 0 0 0; /* 50vh top padding, 0 for others */
                
                /* Flex properties to handle the content box within the remaining space */
                display: flex; /* Re-enable flex */
                flex-direction: column; /* Content box will be a column item */
                align-items: stretch; /* Content box can take full width */   
                justify-content: flex-start; /* Content box starts immediately after top padding */
                background-position: center top; 
            }
        }
    </style>
    <style define:vars={{ 'landing-bg-image-url-var': `url('${backgroundImageUrl}')` }}>
    </style>
</head>
<body class="landing-body-fullscreen">
    <slot /> 
</body>
</html>