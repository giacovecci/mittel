---
// src/layouts/LandingLayout.astro
interface Props {
    title?: string;
    backgroundImageUrl?: string;
    backgroundAltText?: string; 
}
const { 
    title = 'Mittel.TV', 
    backgroundImageUrl = '/uploads/placeholder-landing-bg.jpg',
    backgroundAltText = 'Abstract background image' 
} = Astro.props;
---
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <title>{title}</title>
    
    <script is:inline>
      // ... (your theme script remains the same) ...
      const THEME_KEY = 'theme-preference';
      const THEME_CLASS_LIGHT = 'light-mode';
      const THEME_CLASS_DARK = 'dark-mode';

      const getThemePreference = () => {
        if (typeof localStorage !== 'undefined') {
          return localStorage.getItem(THEME_KEY);
        }
        return window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
      };

      const applyTheme = (theme) => {
        document.documentElement.classList.remove(THEME_CLASS_LIGHT, THEME_CLASS_DARK);
        if (theme === 'light') {
          document.documentElement.classList.add(THEME_CLASS_LIGHT);
        } else {
          // document.documentElement.classList.add(THEME_CLASS_DARK); 
        }
      };

      let currentTheme = getThemePreference();
      applyTheme(currentTheme);

      window.toggleTheme = () => {
        currentTheme = currentTheme === 'light' ? 'dark' : 'light';
        localStorage.setItem(THEME_KEY, currentTheme);
        applyTheme(currentTheme);
        document.dispatchEvent(new CustomEvent('themechanged', { detail: { theme: currentTheme } }));
      };
    </script>

    <style is:global>
        @import '../styles/global.css'; 

        html {
            height: 100%; 
        }
        body.landing-body-fullscreen {
            background-image: var(--landing-bg-image-url-var);
            background-size: cover;
            background-position: center center;
            background-attachment: fixed; 
            background-repeat: no-repeat;
            
            min-height: 100%; /* Use min-height to allow scrolling if content overflows */
            width: 100%;
            margin: 0;
            
            display: flex; 
            flex-direction: column;
            align-items: center;    /* Center slot content horizontally */
            justify-content: center;/* Center slot content vertically */
            
            padding: var(--spacing-xl) var(--spacing-lg); /* Add overall padding */
            /* This padding ensures content isn't flush against edges, especially on small screens */

            color: var(--color-text-unified); 
            text-align: center;
            /* overflow: hidden; */ /* REMOVED: Allow scrolling if content is too tall for viewport */
            overflow-y: auto; /* Allow vertical scroll if needed */
            box-sizing: border-box;
            font-size: var(--font-size-desktop-unified); 
            line-height: var(--line-height-unified);
            background-color: var(--color-background); /* Fallback if image doesn't load */
        }

        /* Ensure the slot itself (which wraps .landing-main-content-box) doesn't restrict flex behavior */
        /* Usually not needed as slot passes content through, but good to be mindful */
        /* body.landing-body-fullscreen > :first-child {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
        } */

    </style>
    <style define:vars={{ 'landing-bg-image-url-var': `url('${backgroundImageUrl}')` }}>
    </style>
</head>
<body class="landing-body-fullscreen">
    <slot /> 
</body>
</html>